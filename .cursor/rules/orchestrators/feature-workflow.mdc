---
description: "Feature Workflow - For building new features with automatic quality enforcement. Invoke with @feature-workflow."
globs: []
alwaysApply: false
---

# Feature Workflow

## Phase 1: UNDERSTAND
1. Restate what's being built
2. Identify affected areas
3. Check tier access requirements

## Phase 2: RESEARCH (Prevent Duplication)

**This phase prevents tech debt. Do not skip.**

1. **Read SOURCE_OF_TRUTH.md** ‚Äî Find existing solutions first
2. **Search for existing code:**

| Building... | Search | Command |
|-------------|--------|---------|
| Component | `components/` | `glob "components/**/*[keyword]*"` |
| Hook | `hooks/`, `lib/hooks/` | `grep "use[Keyword]" hooks/` |
| Utility | `lib/` | `grep "export.*[keyword]" lib/` |
| Service | `lib/*Service.js` | `ls lib/*Service.js` |
| Calculator | `lib/performanceCalculator/` | Check existing calcs |

3. **Decision:** Reuse existing OR justify new creation

```
üìñ SOURCE_OF_TRUTH: [Relevant sections checked]
üîç EXISTING CODE: 
  - Found: [files that can be reused/extended]
  - Searched: [locations checked]
üÜï NEW CODE NEEDED: [Only what doesn't exist - justify each]
```

**STOP if existing code can be extended instead of duplicated.**

## Phase 3: PLAN
1. Component/file structure
2. Data flow
3. State ownership
4. Get approval before implementing

## Phase 4: BUILD
Invoke specialists as needed:
- UI work ‚Üí `@frontend-agent`, `@ui-quality-agent`
- Data work ‚Üí `@database-agent`
- API work ‚Üí `@security-agent`

## Phase 5: AUTO-REVIEW (Virtual Design Team)

**Automatically invoke after build completes:**

1. `code-reviewer` subagent ‚Üí Check Cardinal Rules, patterns, security
2. `ui-reviewer` subagent ‚Üí Check design system (if UI work)
3. `test-writer` subagent ‚Üí Generate test coverage (if new logic)

## Phase 6: VERIFY

```
‚úÖ VERIFICATION:
- [ ] Works as specified
- [ ] Edge cases handled
- [ ] Loading/error states
- [ ] SOURCE_OF_TRUTH patterns followed
- [ ] No duplicate code created
- [ ] Subagent reviews passed
- [ ] Evidence: [show output]
```
