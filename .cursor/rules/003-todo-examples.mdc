# Todo Examples for AutoRev

## Database Tasks

**❌ BAD:**
```
- Fix data linkage issues
```

**✅ GOOD:**
```
- [P1] Fix 68 community_insights with NULL car_id
  VERIFY: SELECT COUNT(*) FROM community_insights WHERE is_active=true AND car_id IS NULL = 0
```

---

**❌ BAD:**
```
- Create new table
```

**✅ GOOD:**
```
- [P3] Create data_pipeline_runs table with status tracking
  VERIFY: SELECT column_name FROM information_schema.columns WHERE table_name='data_pipeline_runs' shows 20 columns
```

---

## Script Update Tasks

**❌ BAD:**
```
- Update scripts to use validation
```

**✅ GOOD:**
```
- [P1] Add validateCarReference to seedLapTimes.mjs
  VERIFY: grep -n "dataValidation" shows import, grep -n "validateCarReference" shows usage

- [P1] Add validateCarReference to seedDynoRuns.mjs  
  VERIFY: grep -n "dataValidation" shows import, grep -n "validateCarReference" shows usage

- [P1] Add pipelineLogger to ingest-affiliate-feed.mjs
  VERIFY: grep -n "pipelineLogger" shows import, grep -c "pipelineRun" shows 5+ usages
```

---

## File Creation Tasks

**❌ BAD:**
```
- Create validation module
```

**✅ GOOD:**
```
- [P1] Create lib/dataValidation.js with validateCarReference, validateTrackReference, withValidation exports
  VERIFY: file exists (wc -l shows 400+ lines), grep shows all 3 exports
```

---

## Multi-Item Tasks

**❌ BAD:**
```
- Add triggers to tables
```

**✅ GOOD:**
```
- [P1] Add auto_car_id trigger to these tables (4 total):
  1. community_insights - VERIFY: SELECT trigger_name FROM information_schema.triggers WHERE event_object_table='community_insights'
  2. car_track_lap_times - VERIFY: same query
  3. car_dyno_runs - VERIFY: same query
  4. youtube_video_car_links - VERIFY: same query
  
  PRE-CHECK: Confirm each table has car_slug column before adding trigger
```

---

## Completion Evidence Examples

**Database task:**
```
VERIFIED: Fix 68 community_insights with NULL car_id
Evidence:
- Query: SELECT COUNT(*) FROM community_insights WHERE is_active=true AND car_id IS NULL
- Result: 0
- Before: 68 records, After: 0 records
```

**Script update task:**
```
VERIFIED: Add pipelineLogger to expandFitments.mjs
Evidence:
- Import: line 37 `import { PipelineRun } from '../lib/pipelineLogger.js'`
- Usage: grep -c "pipelineRun" returns 7
- Verified: both import AND usage present
```

**File creation task:**
```
VERIFIED: Create lib/dataValidation.js
Evidence:
- File exists: wc -l returns 447 lines
- Exports found:
  - line 48: export async function validateCarReference
  - line 89: export async function validateTrackReference  
  - line 134: export function withValidation
```
