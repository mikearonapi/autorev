---
description: CSS architecture rules for consistency and native app preparation. Apply when writing any CSS or styling code.
globs:
  - "app/**/*.css"
  - "components/**/*.css"
  - "styles/**/*.css"
alwaysApply: true
---

# CSS Architecture Rules

## CRITICAL: Use Design Tokens

NEVER hardcode colors, spacing, or typography values. ALWAYS use CSS variables.

```css
/* ❌ WRONG */
background: #0d1b2a;
padding: 16px;
font-size: 14px;
border-radius: 10px;

/* ✅ CORRECT */
background: var(--color-bg-base);
padding: var(--space-4);
font-size: var(--text-body);
border-radius: var(--radius-md);
```

## Token Quick Reference

### Colors
```css
/* Backgrounds */
--color-bg-base: #0d1b2a
--color-bg-elevated: #1b263b
--color-bg-card: rgba(255, 255, 255, 0.04)

/* Text */
--color-text-primary: #ffffff
--color-text-secondary: #94a3b8
--color-text-tertiary: #64748b

/* Accents */
--color-accent-lime: #d4ff00     /* PRIMARY CTAs */
--color-accent-teal: #10b981     /* Improvements */
--color-accent-blue: #3b82f6     /* Baseline */
--color-accent-gold: #d4a84b     /* Labels */
```

### Spacing (4px base)
```css
--space-1: 4px
--space-2: 8px
--space-3: 12px
--space-4: 16px   /* Base unit */
--space-6: 24px
--space-8: 32px
```

### Touch Targets
```css
--touch-target-min: 44px   /* MINIMUM for buttons/links */
```

## Compose from Component Library

When creating buttons, cards, badges, or forms, FIRST check if a component style exists:

```css
/* In your .module.css file */
.submitButton {
  composes: btn-primary from '@/styles/components/buttons.css';
}

.vehicleCard {
  composes: card-interactive from '@/styles/components/cards.css';
}

.gainBadge {
  composes: badge-gain from '@/styles/components/badges.css';
}
```

## Available Component Classes

### Buttons (styles/components/buttons.css)
- `.btn-primary` - Lime CTAs
- `.btn-secondary` - Outline buttons
- `.btn-accent` - Gold buttons
- `.btn-teal` - Success actions
- `.btn-ghost` - Minimal/tertiary
- `.btn-icon` - Icon-only buttons
- `.btn-danger` - Destructive actions

### Cards (styles/components/cards.css)
- `.card` - Base card
- `.card-interactive` - Clickable
- `.card-elevated` - With shadow
- `.card-teal` - Teal border
- `.card-dashed` - Empty state

### Badges (styles/components/badges.css)
- `.badge-success` - Teal
- `.badge-gain` - For "+99" style gains
- `.badge-gold` - Labels
- `.badge-lime` - Emphasis
- `.pill-active` - Active filters

### Progress (styles/components/progress.css)
- `.progress-track` - Bar background
- `.progress-fill-stock` - Blue fill
- `.progress-fill-improved` - Teal fill
- `.metric-row` - Full metric layout

## Module CSS = Layout Only

Page `.module.css` files should contain ONLY:
1. Layout (grid, flex)
2. Page-specific spacing
3. Composition from shared components

```css
/* ✅ CORRECT - layout focused */
.pageGrid {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--gap-md);
  padding: var(--padding-page-x);
}

@media (min-width: 768px) {
  .pageGrid {
    grid-template-columns: repeat(2, 1fr);
  }
}
```

## Pre-Flight Checklist

Before submitting CSS code:

| Check | Question |
|-------|----------|
| ☐ No hardcoded colors | Using `--color-*` tokens? |
| ☐ No hardcoded spacing | Using `--space-*` tokens? |
| ☐ Touch targets | Buttons/links min 44px? |
| ☐ Component reuse | Using existing component class? |
| ☐ Safe area insets | Bottom elements use safe area? |

## Native App Compatibility

This token system maps directly to React Native:

```javascript
// Web CSS
background: var(--color-accent-lime);

// React Native (auto-generated)
backgroundColor: tokens.accentLime,
```

Always think: "Will this style work in React Native?"

- ✅ Simple properties (background, padding, margin)
- ✅ Flexbox layout
- ❌ CSS Grid (use Flexbox instead when possible)
- ❌ `::before`/`::after` pseudo-elements
- ❌ Complex selectors
