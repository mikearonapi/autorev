/* ==========================================================================
   AutoRev - Global Styles & Theme Tokens
   Mobile-First Design System
   ========================================================================== */

/* --------------------------------------------------------------------------
   Font Configuration
   -------------------------------------------------------------------------- 
   Fonts are loaded via next/font in lib/fonts.js for optimal performance:
   - Automatic self-hosting (no external requests)
   - Zero layout shift with size-adjust
   - Preloading of critical font files
   
   CSS variables --font-inter and --font-oswald are set on <html>
   -------------------------------------------------------------------------- */

/* --------------------------------------------------------------------------
   Mobile Utilities Import
   -------------------------------------------------------------------------- */
@import './mobile-utilities.css';

/* --------------------------------------------------------------------------
   Design Token System Import
   --------------------------------------------------------------------------
   CRITICAL: This import makes all --color-* variables available globally.
   The token system provides a single source of truth for colors, spacing,
   typography, shadows, and animations.
   
   See: styles/tokens/colors.css for the color definitions
   -------------------------------------------------------------------------- */
@import '../styles/tokens/index.css';

/* --------------------------------------------------------------------------
   Utility CSS Imports
   -------------------------------------------------------------------------- */
@import '../styles/utilities/focus.css';
@import '../styles/utilities/breakpoints.css';

/* --------------------------------------------------------------------------
   Skip Link - Global Fallback (WCAG 2.4.1)
   --------------------------------------------------------------------------
   CRITICAL: This ensures the skip link is ALWAYS hidden on initial render,
   even if CSS modules fail to load (prevents FOUC on iOS Safari).
   Uses attribute selector to target the link regardless of class hash.
   -------------------------------------------------------------------------- */
a[href='#main-content'] {
  position: absolute;
  top: -100%;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10000;
  background: var(--color-accent-lime, #d4ff00);
  color: var(--color-text-inverted, #000000);
  padding: 12px 24px;
  font-weight: 600;
  font-size: 14px;
  text-decoration: none;
  border-radius: 0 0 8px 8px;
  transition: top 0.2s ease;
}

a[href='#main-content']:focus {
  top: 0;
  outline: 2px solid var(--color-accent-lime, #d4ff00);
  outline-offset: 2px;
}

/* --------------------------------------------------------------------------
   CSS Custom Properties (Theme Tokens)
   Build-Focused Premium Dark Theme (January 2026)
   Inspired by GRAVL/FIXD - Clean, premium, performance-focused
   -------------------------------------------------------------------------- */
:root {
  /* =======================================================================
     AUTOREV BRAND COLOR SYSTEM
     Version 1.0 - January 2026
     See docs/BRAND_GUIDELINES.md for full documentation
     ======================================================================= */

  /* =======================================================================
     CORE BRAND COLORS
     These are the PRIMARY colors that define AutoRev's visual identity
     ======================================================================= */

  /* =======================================================================
     BACKGROUND COLORS - 6-Level Hierarchy (Premium Dark Theme)
     See docs/BRAND_GUIDELINES.md for full documentation
     ======================================================================= */

  /* Level 1: Immersive - Deepest black for cinematic moments */
  --brand-bg-immersive: var(--color-bg-immersive, #050a12); /* Media galleries, video, splash */

  /* Level 2: Base - Main app foundation */
  --brand-bg-primary: var(--color-bg-base, #0d1b2a);

  /* Level 3: Overlay - Focused modal experiences (CHARCOAL) */
  --brand-bg-overlay: var(
    --color-bg-overlay-solid,
    #1a1a1a
  ); /* Questionnaires, modals, onboarding */

  /* Level 4: Elevated - Cards and panels */
  --brand-bg-secondary: var(--color-bg-elevated, #1b263b);

  /* Level 5: Surface - Subtle card fills */
  --brand-bg-surface: var(--color-bg-surface, rgba(255, 255, 255, 0.04));
  --brand-bg-card: rgba(255, 255, 255, 0.04);
  --brand-bg-card-hover: rgba(255, 255, 255, 0.08);

  /* Level 6: Input - Form fields */
  --brand-bg-input: var(--color-bg-input, rgba(255, 255, 255, 0.06));

  /* Text Colors - Optimized for dark backgrounds with better contrast */
  --brand-text-primary: var(--color-text-primary, #ffffff);
  --brand-text-secondary: var(--color-text-secondary, #94a3b8); /* Slate-400: Better readability */
  --brand-text-tertiary: var(--color-text-tertiary, #64748b); /* Slate-500: Subtle text */
  --brand-text-muted: var(--color-text-muted, #475569); /* Slate-600: Very subtle */

  /* Accent Colors - THE CORE 4 (Each has ONE specific purpose)
     See docs/BRAND_GUIDELINES.md for usage rules */
  --brand-lime: var(--color-accent-lime, #d4ff00); /* USER ACTIONS: CTAs, buttons, focus states */
  --brand-lime-dark: var(--color-accent-lime-dark, #bfe600);
  --brand-teal: var(
    --color-accent-teal,
    #10b981
  ); /* POSITIVE DATA: Gains, improvements, active states */

  --brand-teal-light: var(--color-accent-teal-light, #34d399);
  --brand-teal-dark: var(--color-accent-teal, #059669);
  --brand-blue: var(--color-accent-blue, #3b82f6); /* BASELINE: Stock values, original data */
  --brand-blue-light: var(--color-accent-blue-light, #60a5fa);
  --brand-blue-dark: var(--color-accent-blue, #1d4ed8);
  --brand-amber: var(
    --color-accent-amber,
    #f59e0b
  ); /* WARNINGS ONLY: Caution, alerts (use sparingly) */

  --brand-amber-light: var(--color-accent-amber-light, #fbbf24);

  /* DEPRECATED: Gold removed from palette - use amber for warnings, muted white for labels */
  --brand-gold: var(--color-accent-amber, #f59e0b); /* Maps to amber - DO NOT USE DIRECTLY */
  --brand-gold-light: var(--color-accent-amber-light, #fbbf24);
  --brand-gold-hover: var(--color-accent-amber-light, #fbbf24);

  /* RGB Components - For use with rgba(var(--brand-X-rgb), opacity) */
  --brand-lime-rgb: 212, 255, 0;
  --brand-teal-rgb: 16, 185, 129;
  --brand-teal-dark-rgb: 26, 77, 110;
  --brand-blue-rgb: 59, 130, 246;
  --brand-amber-rgb: 245, 158, 11;
  --brand-error-rgb: 239, 68, 68;
  --brand-success-rgb: 34, 197, 94;
  --brand-warning-rgb: 245, 158, 11;
  --brand-purple-rgb: 139, 92, 246;

  /* DEPRECATED: Use amber-rgb instead */
  --brand-gold-rgb: 245, 158, 11; /* Maps to amber */

  /* Additional brand colors needed for migration */
  --brand-bg-primary-dark: var(--color-bg-base, #0a1628);
  --brand-bg-card-dark: var(--color-bg-elevated, #1a1a2e);
  --brand-border-subtle: var(--color-bg-base, #1a1a1a);
  --brand-border-default: var(--color-bg-base, #252525);
  --brand-error-light: var(--color-error, #f87171);
  --brand-error-dark: var(--color-error, #dc2626);
  --brand-warning: var(--color-accent-amber, #f59e0b);
  --brand-purple-accent: var(--color-info, #8b5cf6);
  --brand-primary-dark: var(--color-accent-blue, #1a4d6e);

  /* Chart & Visualization Colors */
  --brand-chart-outline: rgba(255, 255, 255, 0.15);
  --brand-chart-border: rgba(255, 255, 255, 0.08);
  --brand-chart-grid: rgba(255, 255, 255, 0.08);
  --brand-chart-stock: var(--brand-blue);
  --brand-chart-modified: var(--brand-teal);

  /* Semantic Colors */
  --brand-success: var(--color-success, #22c55e);
  --brand-success-light: var(--color-success-light, #4ade80);
  --brand-success-dark: var(--color-success, #16a34a);
  --brand-error: var(--color-error, #ef4444);
  --brand-info: var(--color-accent-blue, #3b82f6);

  /* =======================================================================
     LEGACY ALIASES (Backwards Compatibility)
     Map old variable names to new brand system
     ======================================================================= */

  /* Background Hierarchy - Deep navy for premium feel */
  --bg-primary: var(--brand-bg-primary);
  --background-primary: var(--brand-bg-primary);
  --bg-secondary: var(--brand-bg-secondary);
  --bg-card: var(--brand-bg-card);
  --bg-card-hover: var(--color-bg-base, #1c1c1c);
  --bg-elevated: var(--color-bg-base, #1f1f1f);
  --bg-input: var(--color-bg-base, #0d0d0d);

  /* GRAVL Theme Colors (Aliases) */
  --gravl-navy: var(--color-bg-base, #0a1628);
  --gravl-navy-light: var(--color-bg-base, #0f1f35);
  --gravl-lime: var(--color-accent-lime, #d4ff00);
  --gravl-lime-dark: var(--color-accent-lime-dark, #bfe600);

  /* Accent Colors - Using Brand System (LEGACY ALIASES) */
  --accent-primary: var(--brand-lime); /* Primary CTAs now use lime */
  --accent-primary-hover: var(--brand-lime-dark);
  --accent-primary-muted: rgba(var(--brand-lime-rgb), 0.15);
  --accent-secondary: var(--brand-teal); /* Secondary actions use teal */
  --accent-secondary-hover: var(--brand-teal-light);
  --accent-secondary-muted: rgba(var(--brand-teal-rgb), 0.15);

  /* Improvement/Gain Color - Teal for positive changes */
  --color-improvement: var(--color-accent-teal, #10b981);
  --color-improvement-light: var(--color-accent-teal-light, #34d399);
  --color-improvement-muted: rgba(16, 185, 129, 0.15);

  /* Baseline/Stock Color - Blue for original values */
  --color-baseline: var(--color-accent-blue, #3b82f6);
  --color-baseline-light: var(--color-accent-blue-light, #60a5fa);
  --color-baseline-muted: rgba(var(--brand-blue-rgb), 0.15);

  /* Brand Colors - Updated January 2026 */
  --sn-primary: var(--color-accent-blue, #1a4d6e);
  --sn-primary-light: var(--color-accent-blue, #2a6d94);
  --sn-primary-dark: var(--color-accent-blue, #0f3347);
  --sn-accent: var(--brand-lime); /* Primary accent is now lime */
  --sn-accent-light: var(--brand-lime-dark);
  --sn-accent-dark: var(--color-accent-lime-dark, #a8cc00);

  /* DEPRECATED: Premium gold badge color - migrate to purple tier colors */
  --sn-gold: var(--color-info, #7c3aed); /* Now maps to premium purple */
  --sn-gold-light: var(--color-info, #8b5cf6);
  --sn-gold-dark: var(--color-info, #6d28d9);

  /* Text Colors - Using Brand System */
  --text-primary: var(--color-text-primary, #ffffff);
  --text-secondary: var(--color-text-secondary, #94a3b8);
  --text-tertiary: var(--color-text-tertiary, #64748b);
  --text-muted: var(--color-text-muted, #475569);
  --text-emphasis: var(--color-accent-lime, #d4ff00); /* For emphasized headlines */
  --text-improvement: var(--color-accent-teal, #10b981); /* For improvement/gain values */
  --text-baseline: var(--color-accent-blue, #3b82f6); /* For stock/baseline values */

  /* Border Colors - Subtle definition */
  --border-subtle: var(--color-bg-base, #1a1a1a);
  --border-default: var(--color-bg-base, #252525);
  --border-hover: var(--color-text-muted, #333333);
  --border-focus: var(--brand-lime); /* Focus states use lime (action intent) */

  /* Neutral Palette (legacy support) */
  --color-white: var(--color-text-primary, #ffffff);
  --color-gray-50: var(--color-bg-muted, #fafafa);
  --color-gray-100: var(--color-bg-muted, #f5f5f5);
  --color-gray-200: var(--color-border-subtle, #e5e5e5);
  --color-gray-300: var(--color-border-default, #d4d4d4);
  --color-gray-400: var(--color-text-secondary, #94a3b8);
  --color-gray-500: var(--color-text-tertiary, #64748b);
  --color-gray-600: var(--color-text-muted, #444444);
  --color-gray-700: var(--color-text-muted, #333333);
  --color-gray-800: var(--color-bg-base, #1a1a1a);
  --color-gray-900: var(--color-bg-base, #0a0a0a);

  /* Semantic Colors - Brighter for dark theme */
  --color-success: var(--color-success, #22c55e);
  --color-success-light: rgba(var(--brand-success-rgb), 0.15);
  --color-info: var(--color-accent-blue, #3b82f6);
  --color-info-light: rgba(var(--brand-blue-rgb), 0.15);
  --color-warning: var(--color-accent-amber, #f59e0b);
  --color-warning-light: rgba(var(--brand-warning-rgb), 0.15);
  --color-error: var(--color-error, #ef4444);
  --color-error-light: rgba(var(--brand-error-rgb), 0.15);

  /* Score Colors (for advisory/performance ratings) */
  --score-excellent: var(--color-success, #15803d);
  --score-excellent-bg: rgba(21, 128, 61, 0.1);
  --score-good: var(--color-accent-blue, #1d4ed8);
  --score-good-bg: rgba(29, 78, 216, 0.1);
  --score-average: var(--color-accent-amber, #b45309);
  --score-average-bg: rgba(180, 83, 9, 0.1);
  --score-poor: var(--color-error, #b91c1c);
  --score-poor-bg: rgba(185, 28, 28, 0.1);

  /* Tier Colors */
  --tier-premium: var(--color-info, #7c3aed);
  --tier-premium-bg: rgba(124, 58, 237, 0.08);
  --tier-upper: var(--color-accent-blue, #2563eb);
  --tier-upper-bg: rgba(37, 99, 235, 0.08);
  --tier-mid: var(--color-accent-teal, #059669);
  --tier-mid-bg: rgba(5, 150, 105, 0.08);
  --tier-entry: var(--color-accent-amber, #d97706);
  --tier-entry-bg: rgba(217, 119, 6, 0.08);

  /* Recommendation Card Accents */
  --rec-top: var(--color-accent-teal, #059669);
  --rec-sound: var(--color-accent-amber, #d97706);
  --rec-track: var(--color-accent-blue, #2563eb);
  --rec-value: var(--color-info, #7c3aed);
  --rec-reliable: var(--color-accent-teal, #0891b2);
  --rec-aftermarket: var(--color-accent-pink, #db2777);

  /* Performance HUB Category Colors */
  --perf-power: var(--color-error, #ef4444);
  --perf-grip: var(--color-accent-blue, #3498db);
  --perf-braking: var(--color-accent-amber, #e67e22);
  --perf-track: var(--color-info, #9b59b6);
  --perf-comfort: var(--color-accent-teal, #1abc9c);
  --perf-reliability: var(--color-success, #27ae60);
  --perf-sound: var(--color-accent-amber, #f39c12);

  /* =======================================================================
     MOBILE-FIRST SPACING SCALE
     Premium Polish (Jan 2026): Slightly more generous for luxury feel
     ======================================================================= */
  --space-xs: 8px;
  --space-sm: 14px; /* Increased from 12px */
  --space-md: 18px; /* Increased from 16px */
  --space-lg: 26px; /* Increased from 24px */
  --space-xl: 36px; /* Increased from 32px */
  --space-2xl: 52px; /* Increased from 48px */
  --space-3xl: 72px; /* Increased from 64px */
  --space-4xl: 104px; /* Increased from 96px */

  /* =======================================================================
     FLUID TYPOGRAPHY (Mobile-First with Clamp)
     
     Formula: clamp(min, base + coefficient*vw, max)
     Using rem units so they compound with root font-size scaling.
     
     IMPORTANT: The middle value (preferred) must actually produce values
     between min and max across mobile viewport range (320-430px).
     Previous formulas were hitting minimums on ALL mobile viewports!
     ======================================================================= */

  /* Font variables - using next/font CSS variables with fallbacks */
  --font-display: var(--font-oswald, 'Oswald'), 'Impact', sans-serif;
  --font-body:
    var(--font-inter, 'Inter'), 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI',
    Roboto, sans-serif;
  --font-primary: var(--font-inter, 'Inter'), -apple-system, BlinkMacSystemFont, sans-serif;
  --font-mono: 'SF Mono', 'Fira Code', 'JetBrains Mono', ui-monospace, 'Consolas', monospace;

  /* Fluid font sizes - NOW ACTUALLY SCALE across mobile viewports
     Results at key viewports (combined with root scaling):
     
     Variable       | 360px | 390px | 430px | 768px
     ---------------|-------|-------|-------|-------
     --font-size-xs | 10px  | 10px  | 10.2px| 12px
     --font-size-sm | 11px  | 11.2px| 11.5px| 14px
     --font-size-base| 13px | 13.3px| 13.7px| 16px
     etc...
  */
  --font-size-xs: clamp(0.625rem, 0.5rem + 0.4vw, 0.75rem);
  --font-size-sm: clamp(0.688rem, 0.5rem + 0.6vw, 0.875rem);
  --font-size-base: clamp(0.813rem, 0.625rem + 0.75vw, 1rem);
  --font-size-lg: clamp(0.875rem, 0.625rem + 1vw, 1.125rem);
  --font-size-xl: clamp(1rem, 0.75rem + 1.25vw, 1.375rem);
  --font-size-2xl: clamp(1.125rem, 0.875rem + 1.5vw, 1.75rem);
  --font-size-3xl: clamp(1.375rem, 1rem + 2vw, 2.25rem);
  --font-size-4xl: clamp(1.625rem, 1.25rem + 2.5vw, 3rem);
  --font-size-hero: clamp(1.75rem, 1.25rem + 3.5vw, 3.5rem);
  --line-height-tight: 1.1;
  --line-height-snug: 1.25;
  --line-height-normal: 1.45;
  --line-height-relaxed: 1.6;

  /* Border Radius */
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 14px;
  --radius-xl: 20px;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.04);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.08);
  --shadow-xl: 0 16px 48px rgba(0, 0, 0, 0.12);
  --shadow-card: 0 1px 3px rgba(0, 0, 0, 0.04), 0 4px 12px rgba(0, 0, 0, 0.04);

  /* Transitions */
  --transition-fast: 150ms ease;
  --transition-base: 200ms ease;
  --transition-slow: 300ms ease;

  /* =======================================================================
     LAYOUT - Mobile-First Breakpoints
     ======================================================================= */
  --container-max: 1320px;
  --header-height: 56px;
  --header-height-mobile: 48px;
  --header-height-desktop: 64px;
  --beta-banner-height: 44px;
  --beta-banner-height-mobile: 40px;
  --selected-car-banner-height: 52px;

  /* Combined heights for layout calculations */
  --header-plus-banner-mobile: calc(var(--header-height-mobile) + var(--beta-banner-height-mobile));
  --header-plus-banner: calc(var(--header-height) + var(--beta-banner-height));

  /* Dynamic content offset - changes based on banner state
     This is the recommended way to offset content below fixed header/banners.
     Use --content-offset for full offset, or --header-only for header-only */
  --content-offset-mobile: var(--header-plus-banner-mobile);
  --content-offset: var(--header-plus-banner);
  --header-only-mobile: var(--header-height-mobile);
  --header-only: var(--header-height);

  /* Mobile-first content widths */
  --content-width-narrow: 480px;
  --content-width-medium: 720px;
  --content-width-wide: 960px;

  /* Touch target minimum (Apple/Google guidelines) */
  --touch-target-min: 44px;

  /* Safe area insets for notched devices
     IMPORTANT: These use 0px fallback which works for normal browsing.
     For PWAs, the SafeAreaInit component sets data-safe-area-ready after mount
     to ensure env() values are calculated and styles are recalculated. */
  --safe-area-top: env(safe-area-inset-top, 0px);
  --safe-area-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-left: env(safe-area-inset-left, 0px);
  --safe-area-right: env(safe-area-inset-right, 0px);

  /* PWA Safe Area Fallbacks
     These are used BEFORE safe areas are calculated (initial PWA render).
     After SafeAreaInit runs and sets data-safe-area-ready, actual env() values are used.
     47px = iPhone notch/Dynamic Island typical height
     34px = iPhone home indicator typical height */
  --safe-area-top-fallback: 47px;
  --safe-area-bottom-fallback: 34px;
}

/* Tablet breakpoint: increase spacing - GRAVL-inspired generous scale */
@media (min-width: 768px) {
  :root {
    --space-md: 20px;
    --space-lg: 28px;
    --space-xl: 40px;
    --space-2xl: 56px;
    --space-3xl: 80px;
    --space-4xl: 120px;
  }
}

/* --------------------------------------------------------------------------
   Reset & Base Styles (Mobile-Optimized)
   -------------------------------------------------------------------------- */
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  scroll-behavior: smooth;

  /* =======================================================================
     MOBILE TEXT SIZE & ZOOM PREVENTION
     
     These rules prevent unwanted zoom behaviors on mobile devices:
     - text-size-adjust: Prevents iOS/Android from auto-scaling text on rotation
     - touch-action: Controls how touch gestures are handled
     ======================================================================= */
  -webkit-text-size-adjust: 100%;
  -moz-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  text-size-adjust: 100%;

  /* =======================================================================
     CRITICAL: PREVENT HORIZONTAL OVERFLOW
     
     This is a multi-layered approach to prevent any horizontal overflow:
     1. width: 100% - Base constraint
     2. max-width: 100% - Use 100% instead of 100vw to avoid iOS Safari bug
        where 100vw includes scrollbar width even when no scrollbar exists
     3. overflow-x: clip - Most aggressive overflow clipping
     ======================================================================= */
  width: 100%;
  max-width: 100%;
  overflow-x: clip;

  /* Allow vertical scroll + pinch zoom, prevent horizontal pan that triggers zoom */
  touch-action: pan-y pinch-zoom;

  /* NOTE: overscroll-behavior-y is set on body only (not html) to avoid
     conflicting scroll containers on Android Chrome. Body is the scroll container. */

  /* Improve scroll performance - account for fixed header + beta banner */
  scroll-padding-top: var(--header-plus-banner-mobile);

  /* =======================================================================
     ROOT FONT-SIZE SCALING
     Everything using rem units automatically scales with viewport width.
     This provides proportional scaling across ALL phone sizes.
     
     At 320px: ~14.6px  (minimum mobile)
     At 360px: ~14.8px  (Samsung Galaxy S baseline)
     At 390px: ~14.95px (iPhone 14/15 standard)
     At 430px: ~15.15px (iPhone Pro Max)
     At 768px: ~16px    (tablet - hits maximum)
     ======================================================================= */
  font-size: clamp(0.875rem, 0.8rem + 0.5vw, 1rem);
}

@media (min-width: 768px) {
  html {
    scroll-padding-top: var(--header-plus-banner);
  }
}

body {
  font-family: var(--font-body);
  font-size: var(--font-size-base);
  line-height: var(--line-height-normal);

  /* Build Pivot: Dark theme by default */
  color: var(--text-primary, #ffffff);

  /* =======================================================================
     SAFE AREA BACKGROUND SYSTEM (Jan 2026)
     
     iOS PWAs with black-translucent status bar show page content behind 
     the status bar/notch. This system allows modals to dynamically set
     the safe area color to match their background.
     
     Usage: Set --safe-area-top-bg on body or a parent element when opening
     a modal with a different background color.
     ======================================================================= */
  --safe-area-top-bg: var(--color-bg-base, #0d1b2a);
  --safe-area-bottom-bg: var(--pwa-nav-bg, #0d1b2a);

  /* =======================================================================
     PREMIUM GRADIENT BACKGROUND (Jan 2026)
     Subtle gradient: lighter navy at top, deeper navy at bottom
     Creates depth and polish without being obvious
     ======================================================================= */
  background: linear-gradient(
    180deg,
    var(--color-bg-light, #152535) 0%,
    var(--color-bg-base, #0d1b2a) 35%,
    var(--color-bg-base, #0d1b2a) 65%,
    var(--color-bg-deep, #060d14) 100%
  );
  background-color: var(--color-bg-base, #0d1b2a); /* Fallback for older browsers */
  background-attachment: fixed; /* Gradient stays fixed while content scrolls */
  min-height: 100vh;
  min-height: 100dvh; /* Dynamic viewport height for mobile browsers */

  /* =======================================================================
     PREVENT HORIZONTAL SCROLL & ZOOM TRIGGERS
     
     Content wider than viewport can cause:
     - Horizontal scroll (which triggers zoom on Android)
     - Unexpected layout shifts
     
     NOTE: Use 100% as primary, with vw as fallback for edge cases.
     Avoid dvw as it has inconsistent Android support.
     ======================================================================= */
  width: 100%;
  max-width: 100%;
  overflow-x: hidden;
  box-sizing: border-box;

  /* Improve touch scrolling on iOS */
  -webkit-overflow-scrolling: touch;

  /* =======================================================================
     ANDROID-SPECIFIC FIXES
     
     Android Chrome can auto-boost font sizes in certain conditions.
     These rules prevent that behavior while maintaining readability.
     ======================================================================= */

  /* Prevent Android font boosting (can cause layout shifts) */
  text-rendering: optimizeLegibility;

  /* Ensure consistent touch behavior */
  touch-action: pan-y pinch-zoom;

  /* NOTE: overscroll-behavior-y: none was removed from here because it can
     completely disable scrolling on some Android devices/browsers.
     It's now applied only on iOS via @supports below. */
}

/* Apply overscroll-behavior-y: none ONLY on iOS (Safari/WebKit)
   This prevents pull-to-refresh on iOS without breaking Android scroll.
   -webkit-touch-callout is only supported by iOS Safari. */
@supports (-webkit-touch-callout: none) {
  body {
    overscroll-behavior-y: none;
  }
}

/* ==========================================================================
   SAFE AREA BACKGROUND FILLS (iOS PWA + Android Display Cutouts)
   
   These pseudo-elements fill the device safe areas (notch, Dynamic Island,
   home indicator, camera cutouts) with the appropriate background color.
   
   PLATFORM SUPPORT:
   - iOS: Uses env(safe-area-inset-*) with black-translucent status bar
   - Android: Uses env(safe-area-inset-*) with viewport-fit=cover
   
   AUTOMATIC DETECTION: Uses CSS :has() to detect when an overlay modal
   (marked with data-overlay-modal attribute) is present and changes
   the safe area color to match the overlay background (charcoal).
   
   FALLBACK: For browsers without :has() support (Samsung Internet 18-),
   the SafeAreaFallback component adds .has-overlay-modal / .has-immersive-modal
   classes to <body> via MutationObserver.
   
   This is fully automatic - no JavaScript needed in modern browsers. Just add
   data-overlay-modal to any fullscreen modal container that uses the overlay background.
   ========================================================================== */

/* Top safe area fill (behind Dynamic Island / notch / camera cutout) - DEFAULT (base navy) */

/* Extends above viewport to cover any gaps Safari may show */
body::before {
  content: '';
  position: fixed;
  top: -50px;
  left: 0;
  right: 0;

  /* Safe area height + 50px extension, with 47px fallback for iPhone notch */
  height: calc(env(safe-area-inset-top, 47px) + 50px);
  background: var(--safe-area-top-bg, var(--color-bg-base, #0d1b2a));
  z-index: 10000;
  pointer-events: none;
  transition: background-color 0.15s ease;
}

/* Bottom safe area fill (behind home indicator) - DEFAULT (base navy) */

/* Extends below viewport to cover any gaps Safari may show */
body::after {
  content: '';
  position: fixed;
  bottom: -50px;
  left: 0;
  right: 0;

  /* Safe area height + 50px extension, with 34px fallback for home indicator */
  height: calc(env(safe-area-inset-bottom, 34px) + 50px);
  background: var(--safe-area-bottom-bg, var(--color-bg-base, #0d1b2a));
  z-index: 10000;
  pointer-events: none;
  transition: background-color 0.15s ease;
}

/* AUTOMATIC: When an overlay modal is present, change everything to charcoal */

/* This ensures ANY area showing through (safe areas, gaps) uses the overlay color */

/* Apply to both html and body to cover all edge cases */

/* Must override the gradient background, so we explicitly set all background properties */
html:has([data-overlay-modal]),
body:has([data-overlay-modal]) {
  background: #1a1a1a !important;
  background-color: #1a1a1a !important;
  background-image: none !important;
}

body:has([data-overlay-modal])::before {
  background: #1a1a1a !important;
}

body:has([data-overlay-modal])::after {
  background: #1a1a1a !important;
}

/* CRITICAL: Hide underlying page content when overlay modal is open
   This creates the fully immersive effect - the semi-transparent overlay
   shows only the charcoal body background, not the page content underneath.
   Portal content (rendered directly to body) remains visible.
   This matches how Event Detail pages work naturally (no underlying content). */
body:has([data-overlay-modal]) > :not([data-overlay-modal]) {
  visibility: hidden;
}

/* AUTOMATIC: When an immersive element is present (galleries, video), use deep black */
body:has([data-immersive-modal])::before {
  background: var(--color-bg-immersive, #050a12);
}

body:has([data-immersive-modal])::after {
  background: var(--color-bg-immersive, #050a12);
}

/* ==========================================================================
   CSS :has() FALLBACK CLASSES
   
   For browsers without :has() support (Samsung Internet 18 and older),
   the SafeAreaFallback component adds these classes via MutationObserver.
   ========================================================================== */

/* Fallback: Overlay modal class (added by SafeAreaFallback.jsx) */
html.has-overlay-modal,
body.has-overlay-modal {
  background: #1a1a1a !important;
  background-color: #1a1a1a !important;
  background-image: none !important;
}

body.has-overlay-modal::before {
  background: #1a1a1a !important;
}

body.has-overlay-modal::after {
  background: #1a1a1a !important;
}

/* Fallback: Hide underlying page content (matches :has() rule above) */
body.has-overlay-modal > :not([data-overlay-modal]) {
  visibility: hidden;
}

/* Fallback: Immersive modal class (added by SafeAreaFallback.jsx) */
body.has-immersive-modal::before {
  background: var(--color-bg-immersive, #050a12);
}

body.has-immersive-modal::after {
  background: var(--color-bg-immersive, #050a12);
}

/* ==========================================================================
   HORIZONTAL SAFE AREA FILLS (Landscape Mode + Side Cutouts)
   
   Some Android devices have camera cutouts on the left or right edge.
   In landscape mode, the top/bottom insets become left/right.
   
   These use additional pseudo-elements on a wrapper to handle horizontal
   safe areas without conflicting with body::before/after.
   ========================================================================== */

/* Left safe area fill (landscape mode, left-side camera cutout) */
.safe-area-horizontal::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  bottom: 0;
  width: env(safe-area-inset-left, 0);
  background: var(--safe-area-left-bg, var(--color-bg-base, #0d1b2a));
  z-index: 10000;
  pointer-events: none;
  transition: background-color 0.15s ease;
}

/* Right safe area fill (landscape mode, right-side camera cutout) */
.safe-area-horizontal::after {
  content: '';
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  width: env(safe-area-inset-right, 0);
  background: var(--safe-area-right-bg, var(--color-bg-base, #0d1b2a));
  z-index: 10000;
  pointer-events: none;
  transition: background-color 0.15s ease;
}

/* Update horizontal safe areas when modals are open */
body:has([data-overlay-modal]) .safe-area-horizontal::before,
body:has([data-overlay-modal]) .safe-area-horizontal::after,
body.has-overlay-modal .safe-area-horizontal::before,
body.has-overlay-modal .safe-area-horizontal::after {
  background: #1a1a1a !important;
}

body:has([data-immersive-modal]) .safe-area-horizontal::before,
body:has([data-immersive-modal]) .safe-area-horizontal::after,
body.has-immersive-modal .safe-area-horizontal::before,
body.has-immersive-modal .safe-area-horizontal::after {
  background: var(--color-bg-immersive, #050a12);
}

/* ==========================================================================
   PWA SAFE AREA INITIALIZATION FIX
   
   Problem: In PWAs (especially iOS standalone mode), env(safe-area-inset-*)
   may return 0 on initial render before the browser calculates actual values.
   This causes content to render "shifted up" without proper top padding.
   
   Solution: The SafeAreaInit component sets data-safe-area-ready on <html>
   after mount (using requestAnimationFrame to ensure safe areas are calculated).
   
   CSS Strategy:
   - In PWA standalone mode BEFORE safe-area-ready: Use fallback padding
   - After safe-area-ready: env() values are calculated, CSS works normally
   - In browser mode: No special handling needed (env() works immediately)
   
   The [data-safe-area-ready] check ensures we only apply fallbacks during
   the brief window between PWA launch and safe area calculation.
   ========================================================================== */

/* PWA standalone mode detection - iOS and Android */
@media (display-mode: standalone) {
  /* Before safe areas are ready, ensure content has some top padding
     This prevents the "shifted up" appearance on initial PWA launch */
  :root:not([data-safe-area-ready]) {
    /* Override safe-area-top with fallback during initial render */
    --safe-area-top: var(--safe-area-top-fallback, 47px);
  }
}

/* ==========================================================================
   ANDROID-SPECIFIC OPTIMIZATIONS
   
   Android Chrome has unique behaviors that can cause issues:
   1. Font boosting - auto-scales text in certain conditions
   2. Tap delay - 300ms delay on taps (fixed with touch-action)
   3. Scroll anchoring - can cause layout jumps
   4. Double-tap zoom - can trigger unexpectedly
   
   These rules address common Android issues.
   ========================================================================== */

/* Prevent Android Chrome's text autosizing/font boosting
   Mobile-first: Apply fix to base, safe for all screens */
p,
li,
td,
th,
label,
span,
a {
  max-height: 1000000px;
}

/* Disable double-tap zoom on interactive elements
   This prevents accidental zoom when users tap buttons/links quickly */
button,
a,
input,
select,
textarea,
[role='button'],
[tabindex]:not([tabindex='-1']) {
  touch-action: manipulation;
}

/* Prevent zoom on specific UI elements that should never zoom */
.no-zoom {
  touch-action: pan-y pan-x;
}

/* Fix for Android Chrome address bar resize issues */
@supports (height: 100dvh) {
  :root {
    --vh-fix: 100dvh;
  }
}

@supports not (height: 100dvh) {
  :root {
    --vh-fix: calc(var(--vh, 1vh) * 100);
  }
}

/* --------------------------------------------------------------------------
   Dynamic Banner-Aware Layout System
   
   When no banner is shown, adjust content offset variables to header-only.
   This allows pages to automatically adjust their layout based on whether
   a site-wide banner is currently displayed.
   
   Usage in pages:
   - padding-top: var(--content-offset-mobile);  (Mobile)
   - padding-top: var(--content-offset);         (Tablet+)
   -------------------------------------------------------------------------- */
html:not([data-has-banner]) {
  --content-offset-mobile: var(--header-height-mobile);
  --content-offset: var(--header-height);

  scroll-padding-top: var(--header-height-mobile);
}

@media (min-width: 768px) {
  html:not([data-has-banner]) {
    scroll-padding-top: var(--header-height);
  }
}

/* =======================================================================
   GLOBAL WIDTH CONSTRAINTS
   
   These rules ensure no element can extend beyond the viewport width.
   Critical for preventing mobile "zoom" issues caused by overflow.
   ======================================================================= */

/* Body direct children - constrain everything */
body > * {
  max-width: 100%;
  box-sizing: border-box;
}

/* Main content area - automatically offset below fixed header/banners */
main {
  padding-top: var(--content-offset-mobile);

  /* Prevent child elements from causing horizontal overflow */
  overflow-x: hidden;
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

@media (min-width: 768px) {
  main {
    padding-top: var(--content-offset);
  }
}

/* 
  Utility class for pages that handle their own offset (e.g., full-bleed heroes).
  Apply data-no-main-offset to the page's root element to disable auto-offset.
*/
main:has([data-no-main-offset]) {
  padding-top: 0;
}

/* App layout pages have no header - remove content offset */
main:has([data-app-layout]) {
  padding-top: 0;
}

img,
video {
  max-width: 100%;
  height: auto;
  display: block;
}

a {
  color: inherit;
  text-decoration: none;

  /* Improve tap highlighting */
  -webkit-tap-highlight-color: rgba(var(--brand-teal-dark-rgb), 0.1);
}

button {
  font-family: inherit;
  cursor: pointer;
  border: none;
  background: none;

  /* Improve tap highlighting */
  -webkit-tap-highlight-color: rgba(var(--brand-teal-dark-rgb), 0.1);

  /* Remove default touch callout */
  -webkit-touch-callout: none;
}

input,
select,
textarea {
  font-family: inherit;
  font-size: inherit;

  /* Prevent iOS zoom on focus (use 16px minimum) */
  font-size: max(16px, var(--font-size-base));

  /* Remove default styling on iOS */
  -webkit-appearance: none;
  appearance: none;
  border-radius: 0;
}

/* Reset border-radius after removing default styling */
input:not([type='checkbox'], [type='radio']),
select,
textarea {
  border-radius: var(--radius-md);
}

ul,
ol {
  list-style: none;
}

/* Improve touch targets for interactive elements */
a,
button,
input,
select,
textarea,
[role='button'],
[tabindex] {
  touch-action: manipulation;
}

/* --------------------------------------------------------------------------
   Typography Utilities
   -------------------------------------------------------------------------- */
.text-display {
  font-family: var(--font-display);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.02em;
}

.text-body {
  font-family: var(--font-body);
}

.text-center {
  text-align: center;
}

.text-left {
  text-align: left;
}

.text-right {
  text-align: right;
}

/* Compact text for mobile - shorter line length for readability */
.text-compact {
  max-width: 65ch;
}

/* Truncate text with ellipsis */
.text-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Multi-line truncation (webkit only, but works on most mobile browsers) */
.text-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.text-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* --------------------------------------------------------------------------
   Layout Utilities (Mobile-First)
   -------------------------------------------------------------------------- */
.container {
  width: 100%;
  max-width: var(--container-max);
  margin: 0 auto;

  /* Support notched devices */
  padding-left: max(var(--space-md), var(--safe-area-left));
  padding-right: max(var(--space-md), var(--safe-area-right));
}

@media (min-width: 768px) {
  .container {
    padding-left: var(--space-lg);
    padding-right: var(--space-lg);
  }
}

@media (min-width: 1024px) {
  .container {
    padding-left: var(--space-xl);
    padding-right: var(--space-xl);
  }
}

/* Narrow container for content-focused sections */
.container-narrow {
  max-width: var(--content-width-narrow);
}

.container-medium {
  max-width: var(--content-width-medium);
}

/* Desktop container - wider max-width for iPad/desktop layouts */
.container-desktop {
  max-width: 1200px;
  margin: 0 auto;
  padding-left: var(--space-md);
  padding-right: var(--space-md);
}

@media (min-width: 768px) {
  .container-desktop {
    padding-left: var(--space-lg);
    padding-right: var(--space-lg);
  }
}

@media (min-width: 1024px) {
  .container-desktop {
    padding-left: var(--space-xl);
    padding-right: var(--space-xl);
  }
}

/* Section spacing - compact on mobile */
.section {
  padding-top: var(--space-xl);
  padding-bottom: var(--space-xl);
}

@media (min-width: 768px) {
  .section {
    padding-top: var(--space-2xl);
    padding-bottom: var(--space-2xl);
  }
}

@media (min-width: 1024px) {
  .section {
    padding-top: var(--space-3xl);
    padding-bottom: var(--space-3xl);
  }
}

/* Compact section for tighter spacing */
.section-compact {
  padding-top: var(--space-lg);
  padding-bottom: var(--space-lg);
}

@media (min-width: 768px) {
  .section-compact {
    padding-top: var(--space-xl);
    padding-bottom: var(--space-xl);
  }
}

/* --------------------------------------------------------------------------
   Mobile Stack Layout Utility
   Stack children vertically on mobile, optionally horizontal on larger screens
   -------------------------------------------------------------------------- */
.stack {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.stack-sm {
  gap: var(--space-sm);
}

.stack-lg {
  gap: var(--space-lg);
}

.stack-xl {
  gap: var(--space-xl);
}

/* Convert stack to row on tablet+ */
@media (min-width: 768px) {
  .stack-row-tablet {
    flex-direction: row;
    align-items: center;
  }
}

/* Convert stack to row on desktop */
@media (min-width: 1024px) {
  .stack-row-desktop {
    flex-direction: row;
    align-items: center;
  }
}

/* --------------------------------------------------------------------------
   Grid Utilities (Mobile-First)
   -------------------------------------------------------------------------- */
.grid {
  display: grid;
  gap: var(--space-md);
}

.grid-cols-1 {
  grid-template-columns: 1fr;
}

@media (min-width: 640px) {
  .grid-cols-2-sm {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 768px) {
  .grid-cols-2-md {
    grid-template-columns: repeat(2, 1fr);
  }

  .grid-cols-3-md {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media (min-width: 1024px) {
  .grid-cols-3-lg {
    grid-template-columns: repeat(3, 1fr);
  }

  .grid-cols-4-lg {
    grid-template-columns: repeat(4, 1fr);
  }
}

/* --------------------------------------------------------------------------
   Touch Target Utilities
   Ensure interactive elements meet minimum touch target size (44px)
   -------------------------------------------------------------------------- */
.touch-target {
  min-height: var(--touch-target-min);
  min-width: var(--touch-target-min);
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* Expand tap area without increasing visual size */
.touch-target-expand {
  position: relative;
}

.touch-target-expand::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: max(100%, var(--touch-target-min));
  height: max(100%, var(--touch-target-min));
}

/* --------------------------------------------------------------------------
   Scroll Utilities
   -------------------------------------------------------------------------- */

/* Horizontal scroll with snap for carousels on mobile */
.scroll-x {
  overflow: auto hidden;
  -webkit-overflow-scrolling: touch;
  scroll-snap-type: x mandatory;

  /* Hide scrollbar on mobile but keep functionality */
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.scroll-x::-webkit-scrollbar {
  display: none;
}

.scroll-x > * {
  scroll-snap-align: start;
}

/* Smooth scroll container */
.scroll-smooth {
  scroll-behavior: smooth;
}

/* --------------------------------------------------------------------------
   Visibility Utilities
   -------------------------------------------------------------------------- */

/* Hide on mobile, show on tablet+ */
.hide-mobile {
  display: none !important;
}

@media (min-width: 768px) {
  .hide-mobile {
    display: block !important;
  }

  .hide-mobile-flex {
    display: flex !important;
  }
}

/* Show on mobile only, hide on tablet+ */
.show-mobile-only {
  display: block;
}

@media (min-width: 768px) {
  .show-mobile-only {
    display: none !important;
  }
}

/* --------------------------------------------------------------------------
   Focus & Accessibility - Build Pivot Dark Theme
   -------------------------------------------------------------------------- */
:focus-visible {
  outline: 2px solid var(--brand-lime);
  outline-offset: 2px;
}

/* Enhanced focus for touch devices */
@media (hover: none) and (pointer: coarse) {
  :focus {
    outline: 2px solid var(--brand-lime);
    outline-offset: 2px;
  }
}

/* --------------------------------------------------------------------------
   Button Utilities - Build Pivot Premium Styling
   -------------------------------------------------------------------------- */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  font-weight: 600;
  border-radius: 8px;
  transition: all 0.2s ease;
  cursor: pointer;
  border: none;
  font-family: var(--font-body);
}

/* Primary Button - LIME (Brand standard for main CTAs) */
.btn-primary {
  background: var(--brand-lime);
  color: var(--gravl-navy);
  padding: 16px 32px;
  font-size: var(--font-size-base);
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.02em;
  border-radius: 100px;
}

.btn-primary:hover {
  background: var(--brand-lime-dark);
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(var(--brand-lime-rgb), 0.3);
}

.btn-primary:active {
  transform: translateY(0);
}

/* Accent Button - TEAL (For positive/success actions) */
.btn-accent {
  background: var(--brand-teal);
  color: var(--color-text-primary, #ffffff);
  padding: 12px 24px;
  font-size: var(--font-size-base);
  font-weight: 600;
  border-radius: 10px;
}

.btn-accent:hover {
  background: var(--brand-teal-light);
  transform: translateY(-1px);
}

.btn-accent:active {
  transform: translateY(0);
}

/* Secondary Button - Outline style with lime hover */
.btn-secondary {
  background: transparent;
  color: rgba(255, 255, 255, 0.7);
  border: 1px solid rgba(255, 255, 255, 0.2);
  padding: 16px 32px;
  border-radius: 100px;
}

.btn-secondary:hover {
  border-color: var(--brand-lime);
  color: var(--brand-lime);
  background: rgba(var(--brand-lime-rgb), 0.05);
}

.btn-ghost {
  background: transparent;
  color: var(--text-secondary);
  padding: 8px 16px;
}

.btn-ghost:hover {
  background: var(--bg-card);
  color: var(--text-primary);
}

.btn-sm {
  padding: 8px 16px;
  font-size: var(--font-size-sm);
}

.btn-lg {
  padding: 16px 32px;
  font-size: var(--font-size-lg);
}

/* --------------------------------------------------------------------------
   Form Input Utilities - Build Pivot Dark Theme
   -------------------------------------------------------------------------- */
.input {
  background: var(--bg-input);
  border: 1px solid var(--border-subtle);
  border-radius: 8px;
  padding: 12px 16px;
  color: var(--text-primary);
  font-size: var(--font-size-base);
  transition: all 0.2s ease;
  width: 100%;
}

.input:focus {
  outline: none;
  border-color: var(--brand-lime);
  box-shadow: 0 0 0 3px rgba(var(--brand-lime-rgb), 0.15);
}

.input::placeholder {
  color: var(--text-tertiary);
}

/* --------------------------------------------------------------------------
   Loading Skeleton - Build Pivot Dark Theme
   -------------------------------------------------------------------------- */
@keyframes shimmer {
  0% {
    background-position: -200px 0;
  }

  100% {
    background-position: 200px 0;
  }
}

.skeleton {
  background: linear-gradient(
    90deg,
    var(--bg-card) 0%,
    var(--bg-elevated) 50%,
    var(--bg-card) 100%
  );
  background-size: 200px 100%;
  animation: shimmer 1.5s infinite;
  border-radius: var(--radius-md);
}

.skeleton-text {
  height: 1em;
  border-radius: 4px;
}

.skeleton-title {
  height: 1.5em;
  width: 60%;
  border-radius: 4px;
}

.skeleton-card {
  height: 200px;
  border-radius: var(--radius-lg);
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* --------------------------------------------------------------------------
   Mobile-Specific Interaction States
   -------------------------------------------------------------------------- */

/* Active states for touch devices */
@media (hover: none) and (pointer: coarse) {
  button:active,
  a:active,
  [role='button']:active {
    opacity: 0.8;
    transform: scale(0.98);
  }
}

/* Disable hover effects on touch devices to prevent sticky hover */
@media (hover: none) {
  button:hover,
  a:hover,
  [role='button']:hover {
    /* Reset hover states on touch devices */
  }
}

/* --------------------------------------------------------------------------
   Safe Area Padding for Notched Devices
   -------------------------------------------------------------------------- */
.safe-area-bottom {
  padding-bottom: var(--safe-area-bottom);
}

.safe-area-top {
  padding-top: var(--safe-area-top);
}

/* --------------------------------------------------------------------------
   Content Density Utilities
   -------------------------------------------------------------------------- */

/* Compact content for mobile - tighter spacing */
.content-compact > * + * {
  margin-top: var(--space-sm);
}

.content-normal > * + * {
  margin-top: var(--space-md);
}

.content-relaxed > * + * {
  margin-top: var(--space-lg);
}

/* --------------------------------------------------------------------------
   Card Utilities (Responsive) - Build Pivot Dark Theme
   -------------------------------------------------------------------------- */
.card {
  background: var(--bg-card);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-lg);
  padding: var(--space-md);
  transition: all 0.25s ease;

  /* Premium: subtle inner highlight at top edge */
  box-shadow: inset 0 1px 0 0 rgba(255, 255, 255, 0.03);
}

.card:hover {
  background: var(--bg-card-hover);
  border-color: var(--border-default);
  box-shadow:
    inset 0 1px 0 0 rgba(255, 255, 255, 0.04),
    0 8px 24px rgba(0, 0, 0, 0.2);
}

@media (min-width: 768px) {
  .card {
    padding: var(--space-lg);
  }
}

@media (min-width: 1024px) {
  .card {
    padding: var(--space-xl);
  }
}

.card-compact {
  padding: var(--space-sm);
}

@media (min-width: 768px) {
  .card-compact {
    padding: var(--space-md);
  }
}

/* Build Card variant - for project/build cards */
.card-build {
  background: var(--bg-card);
  border: 1px solid var(--border-subtle);
  border-radius: 16px;
  overflow: hidden;
}

.card-build:hover {
  border-color: var(--accent-primary-muted);
}

/* --------------------------------------------------------------------------
   Desktop-Specific Enhancements
   -------------------------------------------------------------------------- */
@media (min-width: 1024px) {
  :root {
    --space-2xl: 56px;
    --space-3xl: 80px;
    --space-4xl: 120px;
  }
}

@media (min-width: 1280px) {
  :root {
    --space-3xl: 96px;
    --space-4xl: 144px;
  }
}

/* Desktop hover animations (only on hover-capable devices) */
@media (hover: hover) and (min-width: 1024px) {
  .card:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-2px);
    transition: all var(--transition-base);
  }

  a:hover {
    transition: color var(--transition-fast);
  }
}

/* Large desktop max-width constraints */
@media (min-width: 1440px) {
  .container {
    padding-left: var(--space-2xl);
    padding-right: var(--space-2xl);
  }
}

/* Desktop grid enhancements */
@media (min-width: 1280px) {
  .grid-cols-4-xl {
    grid-template-columns: repeat(4, 1fr);
  }

  .grid-cols-5-xl {
    grid-template-columns: repeat(5, 1fr);
  }
}

/* Desktop-only visibility */
.show-desktop-only {
  display: none;
}

@media (min-width: 1024px) {
  .show-desktop-only {
    display: block;
  }
}

/* Hide on desktop */
@media (min-width: 1024px) {
  .hide-desktop {
    display: none !important;
  }
}

/* --------------------------------------------------------------------------
   Tablet-Specific Utilities
   -------------------------------------------------------------------------- */

/* Show only on tablet (768-1023px) - mobile-first approach */
.show-tablet-only {
  display: none;
}

@media (min-width: 768px) {
  .show-tablet-only {
    display: block;
  }
}

@media (min-width: 1024px) {
  .show-tablet-only {
    display: none;
  }
}

/* --------------------------------------------------------------------------
   Print Styles
   -------------------------------------------------------------------------- */
@media print {
  body {
    background: white;
    color: black;
  }

  .hide-print {
    display: none !important;
  }

  a[href]::after {
    content: ' (' attr(href) ')';
  }
}

/* --------------------------------------------------------------------------
   Google Places Autocomplete Styling
   -------------------------------------------------------------------------- */
.pac-container {
  z-index: 10000 !important;
  background: var(--color-white) !important;
  border-radius: 8px !important;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15) !important;
  border: 1px solid var(--color-gray-200) !important;
  margin-top: 4px !important;
  font-family: var(--font-primary) !important;
  padding: 4px 0 !important;
}

.pac-item {
  padding: 10px 14px !important;
  font-size: 14px !important;
  color: var(--color-gray-900) !important;
  border-top: none !important;
  cursor: pointer !important;
  transition: background-color 0.15s ease !important;
}

.pac-item:first-child {
  border-top: none !important;
}

.pac-item:hover,
.pac-item-selected {
  background: var(--color-gold-50, #fffbeb) !important;
}

.pac-icon {
  display: none !important;
}

.pac-item-query {
  font-weight: 500 !important;
  color: var(--color-gray-900) !important;
  font-size: 14px !important;
}

.pac-matched {
  font-weight: 600 !important;
  color: var(--sn-gold) !important;
}

/* Hide Google logo/attribution if present */
.pac-logo::after {
  display: none !important;
}

/* --------------------------------------------------------------------------
   Performance Optimization: Content Visibility
   -------------------------------------------------------------------------- 
   Enables browser to skip rendering of off-screen sections until needed.
   This significantly reduces initial render time and improves LCP.
   -------------------------------------------------------------------------- */

/* Apply to major page sections that are below the fold */
.content-visibility-auto {
  content-visibility: auto;
  contain-intrinsic-size: auto 500px;
}

/* Sections that should defer rendering until visible */
section:not(:first-child) {
  content-visibility: auto;
  contain-intrinsic-size: auto 600px;
}

/* Feature sections commonly below fold */
[class*='featureSection'],
[class*='showcase'],
[class*='testimonial'],
[class*='carShowcase'],
[class*='valueProps'],
[class*='pillars'] {
  content-visibility: auto;
  contain-intrinsic-size: auto 500px;
}

/* Car grid items - defer rendering for items not initially visible */
[class*='carGrid'] > *:nth-child(n + 13) {
  content-visibility: auto;
  contain-intrinsic-size: auto 350px;
}

/* ==========================================================================
   BRAND COLOR UTILITY CLASSES
   Use these classes for consistent brand color application
   See docs/BRAND_GUIDELINES.md for usage guidelines
   ========================================================================== */

/* Text Colors */
.text-brand-primary {
  color: var(--brand-text-primary) !important;
}

.text-brand-secondary {
  color: var(--brand-text-secondary) !important;
}

.text-brand-lime {
  color: var(--brand-lime) !important;
}

.text-brand-teal {
  color: var(--brand-teal) !important;
}

.text-brand-blue {
  color: var(--brand-blue) !important;
}

.text-brand-amber {
  color: var(--brand-amber) !important;
}

.text-improvement {
  color: var(--brand-teal) !important;
}

.text-baseline {
  color: var(--brand-blue) !important;
}

.text-emphasis {
  color: var(--brand-lime) !important;
}

.text-warning {
  color: var(--brand-amber) !important;
}

/* DEPRECATED: Use .text-brand-amber instead */
.text-brand-gold {
  color: var(--brand-amber) !important;
}

/* Background Colors - 6-Level Hierarchy */
.bg-brand-immersive {
  background-color: var(--brand-bg-immersive) !important;
} /* Media, galleries, splash */
.bg-brand-primary {
  background-color: var(--brand-bg-primary) !important;
} /* Main app pages */
.bg-brand-overlay {
  background-color: var(--brand-bg-overlay) !important;
} /* Full-screen modals, onboarding */
.bg-brand-secondary {
  background-color: var(--brand-bg-secondary) !important;
} /* Cards, panels */
.bg-brand-surface {
  background-color: var(--brand-bg-surface) !important;
} /* Card fills */
.bg-brand-card {
  background-color: var(--brand-bg-card) !important;
}

.bg-brand-input {
  background-color: var(--brand-bg-input) !important;
} /* Form fields */

/* Stat Value Styling - "Metallic Silver" Effect for hero stats */
.stat-value-hero {
  font-family: var(--font-mono);
  font-size: 24px; /* Mobile-optimized: increased from 22px */
  font-weight: 800;
  line-height: 1;
  background: linear-gradient(
    180deg,
    var(--color-text-primary, #ffffff) 0%,
    rgba(255, 255, 255, 0.85) 100%
  );
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

@media (min-width: 768px) {
  .stat-value-hero {
    font-size: 28px; /* Slightly larger on tablet+ */
  }
}

/* Standard Stat Value */
.stat-value {
  font-family: var(--font-mono);
  font-weight: 700;
  color: var(--brand-text-primary);
}

/* Improvement Value (Teal) */
.stat-value-improved {
  font-family: var(--font-mono);
  font-weight: 700;
  color: var(--brand-teal);
}

/* Baseline Value (Blue) */
.stat-value-baseline {
  font-family: var(--font-mono);
  font-weight: 600;
  color: var(--brand-blue);
}

/* Improvement Badge */
.badge-improvement {
  display: inline-flex;
  align-items: center;
  padding: 2px 6px;
  background: var(--color-improvement-muted);
  border-radius: 4px;
  font-size: 12px;
  font-weight: 700;
  color: var(--brand-teal);
}

/* Lime Accent Badge */
.badge-accent {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: rgba(var(--brand-lime-rgb), 0.08);
  border: 1px solid rgba(var(--brand-lime-rgb), 0.2);
  padding: 8px 16px;
  border-radius: 100px;
  font-size: 12px;
  font-weight: 600;
  color: var(--brand-lime);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* Chart/Visualization Track Background */
.chart-track {
  background: var(--brand-chart-grid);
  border-radius: 4px;
}

/* Progress Bar - Stock/Baseline */
.progress-baseline {
  background: linear-gradient(90deg, var(--brand-blue) 0%, var(--brand-blue-light) 100%);
  border-radius: 4px;
}

/* Progress Bar - Modified/Improved */
.progress-improved {
  background: linear-gradient(90deg, var(--brand-teal) 0%, var(--brand-teal-light) 100%);
  border-radius: 4px;
}

/* Uppercase Label - Use muted white, NOT accent colors */
.label-uppercase {
  font-size: 10px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.5); /* Muted white per brand guidelines */
  text-transform: uppercase;
  letter-spacing: 0.12em;
}

/* ==========================================================================
   PREMIUM POLISH: FROSTED GLASS / BLUR EFFECTS (Jan 2026)
   iOS-like blur for overlays, modals, and elevated surfaces
   ========================================================================== */

/* Frosted glass backdrop - use on modals and overlays */
.backdrop-blur {
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
}

.backdrop-blur-sm {
  backdrop-filter: blur(8px) saturate(150%);
  -webkit-backdrop-filter: blur(8px) saturate(150%);
}

.backdrop-blur-lg {
  backdrop-filter: blur(32px) saturate(200%);
  -webkit-backdrop-filter: blur(32px) saturate(200%);
}

/* Premium overlay - charcoal with blur (matches safe area #1a1a1a) */
.overlay-premium {
  background: var(--color-bg-overlay, rgba(26, 26, 26, 0.85));
  backdrop-filter: blur(12px) saturate(180%);
  -webkit-backdrop-filter: blur(12px) saturate(180%);
}

/* Elevated surface with subtle inner glow */
.surface-elevated {
  background: var(--color-bg-card, rgba(255, 255, 255, 0.05));
  border: 1px solid var(--color-border-subtle, rgba(255, 255, 255, 0.04));
  box-shadow:
    inset 0 1px 0 0 rgba(255, 255, 255, 0.04),
    0 4px 24px rgba(0, 0, 0, 0.2);
}

/* Premium card with soft glow on hover */
.card-premium {
  background: var(--color-bg-card, rgba(255, 255, 255, 0.05));
  border: 1px solid var(--color-border-subtle, rgba(255, 255, 255, 0.04));
  border-radius: var(--radius-lg);
  transition: all 0.3s ease;
}

.card-premium:hover {
  background: var(--color-bg-card-hover, rgba(255, 255, 255, 0.09));
  border-color: var(--color-border-default, rgba(255, 255, 255, 0.07));
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

/* ==========================================================================
   ONBOARDING ACTIVE STATE
   When onboarding is open, create a full-screen navy backdrop
   and hide all other content for an immersive experience
   ========================================================================== */
body.onboarding-active {
  background: var(--color-bg-base, #0d1b2a) !important;
}

/* Hide all direct children except the onboarding overlay */
body.onboarding-active > *:not([data-onboarding-overlay]) {
  visibility: hidden !important;
}

/* Ensure the onboarding overlay is visible */
body.onboarding-active > [data-onboarding-overlay] {
  visibility: visible !important;
}
