/* ==========================================================================
   App Layout - Native App-Like Experience
   
   GRAVL-Inspired Design:
   - Full-height layouts that fill the viewport
   - Bottom tab bar navigation on mobile (fixed)
   - Content fills space between top and bottom nav
   - Optimized for PWA/native feel
   ========================================================================== */

.appLayout {
  /* Full viewport height using display flex for proper child sizing */
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  min-height: 100dvh;

  /* Prevent horizontal overflow on all devices */
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;

  /* No top padding - child pages handle safe areas if needed */
  padding-top: 0;

  /* NO padding-bottom here - let pages handle it
     This allows content to scroll BEHIND the tab bar for frosted glass effect */
  padding-bottom: 0;

  /* Navy background to match brand - solid for seamless feel */
  background: var(--brand-bg-primary);

  /* Allow content to scroll behind fixed tab bar */
  position: relative;

  /* ANDROID SCROLL FIX: Only clip horizontal overflow, let vertical scroll pass through to body.
     Setting overflow-y: visible explicitly ensures body remains the scroll container.
     This is critical for Android Chrome which can get confused about which element scrolls. */
  overflow: hidden visible;

  /* NOTE: overscroll-behavior-y is handled by body in globals.css (iOS only).
     Duplicate declarations on nested containers can confuse Android Chrome's
     scroll detection. Body is the single source of truth for scroll behavior. */
}

/* Allow child pages to fill available height */
.appLayout > *:first-child {
  flex: 1;
  display: flex;
  flex-direction: column;
}

/* Ensure background extends below content to cover any overscroll area */
.appLayout::after {
  content: '';
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 200px;
  transform: translateY(100%);
  background: var(--brand-bg-primary);
  pointer-events: none;
  z-index: 999; /* Just below tab bar (z-index: 1000) */
}

/* iPad/Desktop: Account for header, no bottom tab bar */
@media (min-width: 768px) {
  .appLayout {
    padding-bottom: 0;

    /* Account for 64px desktop header */
    padding-top: 64px;

    /* Adjust min-height to account for header */
    min-height: 100vh;

    /* Re-enable normal scroll behavior on desktop */
    overscroll-behavior-y: auto;
  }

  .appLayout > *:first-child {
    /* Desktop child pages can use block display */
    display: block;
    flex: none;
  }

  /* Hide bottom extension (no tab bar on iPad/desktop) */
  .appLayout::after {
    display: none;
  }
}

/* Landscape orientation: Pages handle their own padding */
@media (max-height: 500px) and (orientation: landscape) {
  .appLayout {
    /* No layout padding - pages handle tab bar space */
  }
}
